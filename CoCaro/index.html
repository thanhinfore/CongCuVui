<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Luy·ªán Caro 7.1 - Optimized GPU AI</title>
    <link rel="stylesheet" href="style.css">
    <!-- GPU.js for GPU-accelerated computation -->
    <script src="https://cdn.jsdelivr.net/npm/gpu.js@latest/dist/gpu-browser.min.js"></script>
    <!-- TensorFlow.js for Neural Network -->
    <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@latest/dist/tf.min.js"></script>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>Luy·ªán C·ªù Caro <span class="version">v7.1.0 ‚ö°</span> <span style="cursor:pointer" onclick="javascript: window.open('https://luyenai.vn');" class="version-badge">H·ªçc vibe coding t·∫°i Luy·ªán AI</span></h1>
            <div class="header-controls">
                <button id="settingsToggle" class="icon-btn" title="C√†i ƒë·∫∑t">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"/>
                    </svg>
                </button>
                <button id="darkModeToggle" class="icon-btn" title="Ch·∫ø ƒë·ªô t·ªëi">
                    <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                        <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/>
                    </svg>
                </button>
            </div>
        </div>

        <!-- Settings Panel - Enhanced for V4.0 -->
        <div class="settings-panel collapsed" id="settingsPanel">
            <div class="settings-grid">
                <!-- Game Mode -->
                <div class="setting-item">
                    <label>Ch·∫ø ƒë·ªô ch∆°i</label>
                    <select id="gameMode" class="select-input">
                        <option value="pvc" selected>Ng∆∞·ªùi vs AI</option>
                        <option value="pvp">Ng∆∞·ªùi vs Ng∆∞·ªùi</option>
                    </select>
                </div>

                <!-- Board Size -->
                <div class="setting-item">
                    <label>B√†n c·ªù</label>
                    <select id="boardSize" class="select-input">
                        <option value="10">10√ó10</option>
                        <option value="15" selected>15√ó15</option>
                        <option value="19">19√ó19</option>
                    </select>
                </div>

                <!-- AI Difficulty (only for PvC) -->
                <div class="setting-item" id="aiDifficultyContainer">
                    <label>ƒê·ªô kh√≥ AI</label>
                    <select id="aiDifficulty" class="select-input">
                        <option value="easy">D·ªÖ</option>
                        <option value="medium">Trung b√¨nh</option>
                        <option value="hard">Kh√≥</option>
                        <option value="grandmaster">Grand Master</option>
                        <option value="supreme" selected>Supreme (GPU)</option>
                    </select>
                </div>

                <!-- AI Personality (only for PvC) -->
                <div class="setting-item" id="aiPersonalityContainer">
                    <label>T√≠nh c√°ch AI</label>
                    <select id="aiPersonality" class="select-input">
                        <option value="aggressive">T·∫•n c√¥ng</option>
                        <option value="balanced" selected>C√¢n b·∫±ng</option>
                        <option value="defensive">Ph√≤ng th·ªß</option>
                    </select>
                </div>

                <!-- Theme -->
                <div class="setting-item">
                    <label>Giao di·ªán</label>
                    <select id="theme" class="select-input">
                        <option value="default" selected>M·∫∑c ƒë·ªãnh</option>
                        <option value="ocean">ƒê·∫°i d∆∞∆°ng</option>
                        <option value="forest">R·ª´ng xanh</option>
                        <option value="sunset">Ho√†ng h√¥n</option>
                        <option value="neon">Neon</option>
                    </select>
                </div>

                <!-- Sound Toggle -->
                <div class="setting-item toggle-item">
                    <label>√Çm thanh</label>
                    <label class="switch">
                        <input type="checkbox" id="soundToggle" checked>
                        <span class="slider"></span>
                    </label>
                </div>

                <!-- Timer Toggle -->
                <div class="setting-item toggle-item">
                    <label>ƒê·ªìng h·ªì</label>
                    <label class="switch">
                        <input type="checkbox" id="timerToggle">
                        <span class="slider"></span>
                    </label>
                </div>

                <!-- Analysis Mode Toggle -->
                <div class="setting-item toggle-item">
                    <label>Ph√¢n t√≠ch</label>
                    <label class="switch">
                        <input type="checkbox" id="analysisMode">
                        <span class="slider"></span>
                    </label>
                </div>

                <!-- Tutorial Mode Toggle -->
                <div class="setting-item toggle-item">
                    <label>H∆∞·ªõng d·∫´n</label>
                    <label class="switch">
                        <input type="checkbox" id="tutorialMode">
                        <span class="slider"></span>
                    </label>
                </div>
            </div>

            <!-- Game Management Buttons -->
            <div class="game-management">
                <button id="saveGameBtn" class="btn btn-secondary">üíæ L∆∞u game</button>
                <button id="loadGameBtn" class="btn btn-secondary">üìÅ T·∫£i game</button>
                <button id="exportGameBtn" class="btn btn-secondary">üì§ Xu·∫•t</button>
                <button id="importGameBtn" class="btn btn-secondary">üì• Nh·∫≠p</button>
            </div>

            <button id="startGameBtn" class="btn btn-primary">üéÆ Game m·ªõi</button>
        </div>

        <!-- Compact Stats -->
        <div class="stats-compact">
            <div class="stat-item">
                <span class="stat-value player-x" id="xWins">0</span>
                <span class="stat-sep">‚Äì</span>
                <span class="stat-value" id="draws">0</span>
                <span class="stat-sep">‚Äì</span>
                <span class="stat-value player-o" id="oWins">0</span>
            </div>
        </div>

        <!-- Game Status -->
        <div class="game-status">
            <div class="status" id="status">L∆∞·ª£t <span class="player-x">X</span></div>
            <div class="timer" id="timer" style="display: none;">
                <span id="timerDisplay">00:00</span>
            </div>
            <div class="ai-thinking" id="aiThinking" style="display: none;"></div>
        </div>

        <!-- Analysis Panel (V4.0 NEW) -->
        <div class="analysis-panel collapsed" id="analysisPanel">
            <div class="analysis-header">
                <h4>üìä Ph√¢n t√≠ch</h4>
            </div>
            <div class="analysis-content">
                <div class="analysis-item">
                    <label>ƒê√°nh gi√° th·∫ø c·ªù:</label>
                    <div class="evaluation-bar-container">
                        <div class="evaluation-bar" id="evaluationBar"></div>
                    </div>
                </div>
                <div class="analysis-item">
                    <label>Ch·∫•t l∆∞·ª£ng n∆∞·ªõc ƒëi:</label>
                    <div class="move-quality" id="moveQuality">-</div>
                </div>
                <div class="analysis-item">
                    <label>M·ª©c ƒë·ªô nguy hi·ªÉm:</label>
                    <div class="threat-level" id="threatLevel">-</div>
                </div>
            </div>
        </div>

        <!-- Main Game Area -->
        <div class="game-container">
            <div class="board-wrapper">
                <canvas id="particles" class="particles-canvas"></canvas>
                <div id="board" class="board"></div>
            </div>

            <div class="side-panel collapsed" id="sidePanel">
                <button class="panel-toggle" id="historyToggle">
                    <svg width="16" height="16" viewBox="0 0 16 16" fill="currentColor">
                        <path d="M8 3.5a.5.5 0 00-1 0V9a.5.5 0 00.252.434l3.5 2a.5.5 0 00.496-.868L8 8.71V3.5z"/>
                        <path d="M8 16A8 8 0 108 0a8 8 0 000 16zm7-8A7 7 0 111 8a7 7 0 0114 0z"/>
                    </svg>
                </button>
                <div class="history-content">
                    <h4>L·ªãch s·ª≠</h4>
                    <div id="moveHistory" class="move-history"></div>
                </div>
            </div>
        </div>

        <!-- Quick Actions -->
        <div class="quick-actions">
            <button id="undoBtn" class="action-btn" disabled title="Ho√†n t√°c (‚åòZ)">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M3 7v6h6"/>
                    <path d="M21 17a9 9 0 00-9-9 9 9 0 00-6 2.3L3 13"/>
                </svg>
            </button>
            <button id="redoBtn" class="action-btn" disabled title="L√†m l·∫°i (‚åòY)">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M21 7v6h-6"/>
                    <path d="M3 17a9 9 0 019-9 9 9 0 016 2.3l3 2.7"/>
                </svg>
            </button>
            <button id="hintBtn" class="action-btn" title="G·ª£i √Ω (H)">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M12 2v4M12 18v4M4.93 4.93l2.83 2.83M16.24 16.24l2.83 2.83M2 12h4M18 12h4M4.93 19.07l2.83-2.83M16.24 7.76l2.83-2.83"/>
                </svg>
            </button>
            <button id="resetBtn" class="action-btn action-btn-primary" title="Ch∆°i l·∫°i">
                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                    <path d="M23 4v6h-6M1 20v-6h6"/>
                    <path d="M3.51 9a9 9 0 0114.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0020.49 15"/>
                </svg>
            </button>
        </div>

        <!-- V7.1 Footer -->
        <div class="footer">
            <p>CoCaro 7.1 - Optimized GPU AI |
                <span class="feature-badge">5 C·∫•p ƒë·ªô AI</span> |
                <span class="feature-badge">Smart GPU (40%+ board)</span> |
                <span class="feature-badge">NN Caching</span> |
                <span class="feature-badge">Progressive Deepening</span> |
                <span class="feature-badge">Timeout Protection</span>
            </p>
        </div>
    </div>

    <script src="game.js"></script>
</body>
</html>
